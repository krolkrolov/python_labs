# Лабораторная работа 7: Тестирование (pytest) + стиль (black)

## Цель работы
Научиться писать модульные тесты на pytest, измерять покрытие кода и поддерживать единый стиль кода с помощью black.

## Выполненные задачи

### Задание А: Тесты для src/lib/text.py
Созданы комплексные тесты для всех функций модуля `text.py`:

- **normalize()** - тесты базовых случаев, спецсимволы, граничные случаи
- **tokenize()** - тесты различных форматов текста, пунктуация, слова с дефисами
- **count_freq()** - тесты подсчета частот, пустые списки, чувствительность к регистру
- **top_n()** - тесты сортировки по частоте, одинаковые частоты, граничные значения

**Особенности тестов:**
- Параметризация с `@pytest.mark.parametrize`
- Покрытие граничных случаев (пустые строки, повторы, спецсимволы)
- Проверка сортировки по алфавиту при равных частотах
- Интеграционные тесты полного пайплайна обработки текста

### Задание Б: Тесты для src/lab05/json_csv.py
Созданы тесты для функций конвертации:

- **json_to_csv()**
- **csv_to_json()**

**Позитивные сценарии:**
- Корректная конвертация JSON ↔ CSV
- Совпадение количества записей
- Совпадение наборов ключей/заголовков
- Обработка разных наборов полей в объектах
- Поддержка Unicode и специальных символов

**Негативные сценарии:**
- Пустые или некорректные файлы → ValueError
- Несуществующие пути к файлам → FileNotFoundError
- Некорректные структуры данных

**Особенности:**
- Использование фикстуры `tmp_path` для временных файлов
- Round-trip тесты (полный цикл конвертации)
- Параметризация тестовых случаев

### Задание С: Стиль кода (black)
Проект отформатирован с помощью black в соответствии с конфигурацией в `pyproject.toml`.


## Результаты тестирования

### Покрытие кода
```
Name               Stmts   Miss  Cover   Missing
------------------------------------------------
src/lib/text.py       38      0   100%   
src/lab05/json_csv.py 56     13    77%   24-25, 35, 44, 55-56, 77-80, 88, 94-95
```

### Результаты тестов
- **Всего тестов:** 44
- **Пройдено:** 43 
- **Пропущено:** 1 ⏭
- **Фейлы:** 0 

## Команды для запуска

### Тестирование
```bash
# Все тесты
pytest -v

# Тесты для text.py
pytest tests/test_text.py -v

# Тесты для json_csv.py  
pytest tests/test_json_csv.py -v

# С покрытием кода
pytest --cov=src --cov-report=term-missing
```

### Стиль кода
```bash
# Проверка стиля
black --check .

# Форматирование кода
black .

# Проверка после форматирования
black --check .
```

## Выводы
- Все основные требования лабораторной работы выполнены
- Тесты покрывают основную функциональность модулей
- Код соответствует стандарту оформления black
- Покрытие кода находится на хорошем уровне
- Написаны как позитивные, так и негативные тестовые сценарии