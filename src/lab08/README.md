# Лабораторная работа 8: ООП в Python - @dataclass Student

## Примеры запуска функций

### Создание объекта Student:
```python
from models import Student

# Создание студента
student = Student(
    fio="Иванов Иван Иванович",
    birthdate="2003-05-15", 
    group="BIVT-01",
    gpa=4.8
)

# Использование методов
print(student)  # Студент: Иванов Иван Иванович, Группа: BIVT-01, GPA: 4.80, Возраст: 22 лет
print(f"Возраст: {student.age()} лет")
print(f"Отличник: {student.is_excellent()}")
print(f"Курс: {student.study_year()}")
```

### Сериализация в JSON:
```python
from serialize import students_to_json

students = [student1, student2]
students_to_json(students, "students_output.json")
# Вывод: Данные сохранены в файл: students_output.json
#        Сохранено 2 студентов
```

### Десериализация из JSON:
```python
from serialize import students_from_json

students = students_from_json("students_input.json")
# Вывод: Загружено 5 студентов из файла students_input.json
```

### Тестирование валидации:
```python
# Ошибки валидации
Student("Иван", "2003-05-15", "BIVT-01", 4.8)  # ФИО должно содержать минимум имя и фамилию
Student("Иванов Иван", "2003/05/15", "BIVT-01", 4.8)  # Неверный формат даты
Student("Иванов Иван", "2003-05-15", "BIVT-01", 6.0)  # GPA вне диапазона 0-5
```

## Примеры JSON до/после преобразования

### Исходный JSON (students_input.json):
```json
[
  {
    "fio": "Иванов Иван Иванович",
    "birthdate": "2003-05-15",
    "group": "BIVT-01",
    "gpa": 4.8
  }
]
```

### Объект Python после десериализации:
```
Student(
    fio='Иванов Иван Иванович',
    birthdate='2003-05-15',
    group='BIVT-01',
    gpa=4.8
)
```

### JSON после сериализации (students_output.json):
```json
[
  {
    "fio": "Иванов Иван Иванович",
    "birthdate": "2003-05-15",
    "group": "BIVT-01",
    "gpa": 4.8
  }
]
```

### Цикл преобразований:
```
Python объект Student
    ↓ to_dict()
Python словарь {"fio": "...", "birthdate": "...", ...}
    ↓ json.dump()
JSON файл [{"fio": "...", ...}, ...]
    ↓ json.load()
Python словарь
    ↓ from_dict()
Python объект Student
```

## Описание структуры класса Student и логики его методов

### Класс Student с декоратором @dataclass:
```python
@dataclass
class Student:
    fio: str           # ФИО студента (минимум 2 слова)
    birthdate: str     # Дата рождения в формате YYYY-MM-DD
    group: str         # Группа студента (например, "BIVT-01")
    gpa: float         # Средний балл (диапазон 0-5)
```

### Методы класса:

#### 1. `__post_init__(self)`
**Назначение:** Автоматическая валидация при создании объекта  
**Логика:**
- Проверяет формат даты через `datetime.strptime(birthdate, "%Y-%m-%d")`
- Проверяет диапазон GPA: `0 <= gpa <= 5`
- Проверяет, что ФИО содержит минимум 2 слова
- Вызывает `ValueError` при обнаружении ошибок

#### 2. `age(self) -> int`
**Назначение:** Вычисление возраста в полных годах  
**Логика:**
- Преобразует строку `birthdate` в объект `datetime.date`
- Вычисляет разницу между текущей датой и датой рождения
- Корректирует результат, если день рождения в текущем году еще не наступил
- Возвращает целое число (возраст в годах)

#### 3. `to_dict(self) -> dict`
**Назначение:** Сериализация объекта в словарь  
**Логика:**
- Создает словарь с ключами, соответствующими полям класса
- Возвращает структуру: `{"fio": ..., "birthdate": ..., "group": ..., "gpa": ...}`
- Используется для подготовки данных к сохранению в JSON

#### 4. `@classmethod from_dict(cls, data: dict)`
**Назначение:** Десериализация из словаря  
**Логика:**
- Принимает словарь с данными студента
- Использует `cls()` для создания нового экземпляра класса
- Автоматически вызывает `__post_init__()` для валидации
- Возвращает новый объект `Student`

#### 5. `__str__(self) -> str`
**Назначение:** Строковое представление объекта  
**Логика:**
- Форматирует информацию о студенте в читаемом виде
- Включает ФИО, группу, GPA и возраст
- Используется при `print(student)` или `str(student)`

#### 6. `is_excellent(self) -> bool` (дополнительный)
**Назначение:** Проверка, является ли студент отличником  
**Логика:** Возвращает `True`, если `gpa >= 4.5`

#### 7. `study_year(self) -> int` (дополнительный)
**Назначение:** Определение курса по номеру группы  
**Логика:** Извлекает первую цифру из номера группы (например, "BIVT-01" → 1 курс)

### Валидация данных:
- **Дата:** Только формат `YYYY-MM-DD`, проверяется через `datetime.strptime()`
- **GPA:** Только значения от 0 до 5 включительно
- **ФИО:** Минимум 2 слова, разделенных пробелами

### Сериализация/десериализация:
- **`students_to_json()`:** Принимает список `Student`, преобразует каждый в словарь, сохраняет в JSON файл
- **`students_from_json()`:** Читает JSON файл, преобразует каждый словарь в объект `Student`, возвращает список

### Особенности реализации:
- Использование `@dataclass` автоматически генерирует `__init__`, `__repr__`, `__eq__`
- Все данные сохраняются в кодировке UTF-8 для поддержки кириллицы
- Обработка ошибок при загрузке файлов (отсутствие файла, некорректный JSON)